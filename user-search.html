<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Search User | Stick Arc</title>
<link rel="icon" href="favicon.ico.png">
<link rel="stylesheet" href="atp.css">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Poppins', Arial, sans-serif;
}



/* SEARCH BOX */
.box{
  width:360px;
  max-width:92%;
  background: rgba(28,28,28,0.95);
  padding:30px 28px;
  border-radius:25px;
  box-shadow: 0 0 25px rgba(255,204,51,0.4), 0 0 50px rgba(255,204,51,0.2);
  text-align:center;
  border: 2px solid #ffcc33;
}

/* TITLE */
.box h2{
  margin-bottom:20px;
  font-weight:700;
  font-size:22px;
  background: linear-gradient(45deg, #ffb347, #ffcc33);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* INPUT */
.box input{
  width:100%;
  padding:14px 18px;
  border:none;
  border-radius:25px;
  margin-top:14px;
  outline:none;
  font-size:15px;
  background:#1a1a1a;
  color:white;
  border:1px solid #ffcc33;
  box-shadow: inset 0 0 8px rgba(255,204,51,0.2);
  transition:0.3s;
}

.box input:focus{
  box-shadow: 0 0 10px #ffcc33, inset 0 0 6px #ffcc33;
}

/* BUTTON */
.box button{
  width:100%;
  padding:14px;
  margin-top:18px;
  border:none;
  border-radius:25px;
  font-size:15px;
  cursor:pointer;
  font-weight:bold;
  background: linear-gradient(135deg, #ffb347, #ffcc33);
  color:#111;
  transition: all 0.25s ease;
  box-shadow: 0 0 10px rgba(255,204,51,0.5), 0 0 20px rgba(255,204,51,0.3);
}

.box button:hover{
  transform: scale(1.05);
  box-shadow: 0 0 18px rgba(255,204,51,0.8), 0 0 25px rgba(255,204,51,0.5);
}

/* SMALL TEXT */
.hint{
  margin-top:14px;
  font-size:12px;
  opacity:.8;
  color:#ffcc33;
}
</style>
</head>

<body>

<div class="box">
  <h2>üîç Search User</h2>

  <input id="username" placeholder="Enter username" autocomplete="off">
  <button id="searchBtn">Search</button>

  <div class="hint">Search by exact username</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, getDoc } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { getAuth, onAuthStateChanged } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

/* FIREBASE INIT */
const app = initializeApp({
  apiKey:"AIzaSyAIgpVbHc_xdeTb02V_KE13MvxTmWKOSLM",
  authDomain:"stickarc-dcbc9.firebaseapp.com",
  projectId:"stickarc-dcbc9"
});

const db = getFirestore(app);
const auth = getAuth(app);

/* DOM */
const usernameInput = document.getElementById("username");
const searchBtn = document.getElementById("searchBtn");

/* AUTH CHECK */
onAuthStateChanged(auth,(user)=>{
  if(!user) location.href="login.html";
});

/* SEARCH */
async function search(){
  const uname = usernameInput.value.trim();
  if(!uname) return;

  searchBtn.textContent = "Searching...";
  searchBtn.disabled = true;

  const snap = await getDoc(doc(db,"users",uname));

  if(!snap.exists()){
    alert("User not found");
    searchBtn.textContent = "Search";
    searchBtn.disabled = false;
    return;
  }

  location.href = `profile.html?u=${uname}`;
}

/* EVENTS */
searchBtn.onclick = search;
usernameInput.addEventListener("keydown",e=>{
  if(e.key==="Enter") search();
});
</script>

</body>
</html>
