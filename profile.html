<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>User Profile | Stick Arc</title>
<link rel="icon" href="favicon.ico.png">
<style>
/* ğŸŒ‘ RESET */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
}

body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:
    radial-gradient(circle at top, rgba(255,200,100,.3), transparent 55%),
    radial-gradient(circle at bottom, rgba(255,120,0,.4), transparent 60%),
    #040100;
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  color:#ffe8c6;
}

/* ğŸªª PROFILE CARD â€” FULL MOBILE SCREEN */
.profile-card{
  width:100vw;          /* ğŸ‘ˆ poora mobile width */
  min-height:100vh;     /* ğŸ‘ˆ poora mobile height */
  background:rgba(12,6,0,.85);
  border-radius:0;      /* ğŸ‘ˆ edge-to-edge look */
  overflow:hidden;
  box-shadow:
    0 0 50px rgba(255,190,90,.6),
    inset 0 0 30px rgba(255,220,140,.2);
  border:none;
}

/* ğŸ–¼ï¸ COVER */
.cover{
  height:180px;
  background:linear-gradient(135deg,#ffb347,#ff7a00);
  box-shadow:
    inset 0 0 45px rgba(255,255,255,.25),
    0 0 40px rgba(255,140,40,1);
}

/* ğŸ‘¤ PROFILE MAIN */
.profile-main{
  display:flex;
  align-items:center;
  gap:22px;
  padding:32px 26px 14px;
}

/* ğŸ‘‘ AVATAR (TRANSPARENT SAFE) */
.avatar{
  width:150px;
  height:150px;
  border-radius:50%;
  object-fit:cover;
  background:transparent;
  filter:
    drop-shadow(0 0 14px rgba(255,220,140,1))
    drop-shadow(0 0 36px rgba(255,150,40,1))
    drop-shadow(0 0 70px rgba(255,90,0,1));
}

/* ğŸ§¾ TEXT */
.text{
  display:flex;
  flex-direction:column;
  gap:12px;
}

/* ğŸ·ï¸ USERNAME */
.username{
  font-size:2.2rem;
  font-weight:800;
  color:#ffd98a;
  text-shadow:
    0 0 12px rgba(255,210,130,1),
    0 0 34px rgba(255,140,40,1);
}

/* ğŸ–ï¸ BADGE */
.badge{
  align-self:flex-start;
  padding:8px 18px;
  border-radius:18px;
  font-size:1.05rem;
  font-weight:700;
  color:#2b1500;
  background:linear-gradient(145deg,#ffe7a8,#ffb13b);
  box-shadow:
    0 0 14px rgba(255,190,90,1),
    0 0 28px rgba(255,130,30,1);
}

/* ğŸ“ BIO */
.bio{
  margin:22px 26px 28px;
  padding:22px;
  font-size:1.25rem;
  line-height:1.55;
  background:rgba(0,0,0,.6);
  border-radius:22px;
  border:1px solid rgba(255,210,130,.4);
  box-shadow:
    inset 0 0 20px rgba(255,170,70,.25),
    0 0 26px rgba(255,130,30,.3);
}

/* ğŸ”˜ ACTION BUTTON */
.action-btn{
  display:block;
  width:calc(100% - 52px);
  margin:auto auto 32px;
  padding:22px;
  border:none;
  border-radius:26px;
  font-size:1.4rem;
  font-weight:800;
  color:#2b1500;
  background:linear-gradient(145deg,#ffd98c,#ff9c2a);
  box-shadow:
    0 0 26px rgba(255,190,90,1),
    0 0 60px rgba(255,130,30,1),
    inset 0 0 18px rgba(255,255,255,.45);
}

.action-btn:active{
  transform:scale(.96);
}

/* ğŸ“± VERY SMALL PHONES */
@media(max-width:360px){
  .avatar{
    width:130px;
    height:130px;
  }
  .username{
    font-size:1.9rem;
  }
  .bio{
    font-size:1.15rem;
  }
}
</style>



</head>

<body>

<div class="profile-card">

  <!-- Cover -->
  <div class="cover"></div>

  <!-- Profile Info -->
  <div class="profile-main">
    <img id="pic" class="avatar" src="default-avatar.png">

    <div class="text">
      <div class="username" id="name">Loading...</div>
      <div class="badge">Animator</div>
    </div>
  </div>

  <div class="bio" id="bio">No bio yet</div>

  

  <button id="actionBtn" class="action-btn" style="display:none"></button>
</div>

<script type="module">
import { initializeApp } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, getDoc }
from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { getAuth, onAuthStateChanged }
from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const app = initializeApp({
  apiKey:"AIzaSyAIgpVbHc_xdeTb02V_KE13MvxTmWKOSLM",
  authDomain:"stickarc-dcbc9.firebaseapp.com",
  projectId:"stickarc-dcbc9"
});

const db = getFirestore(app);
const auth = getAuth(app);

/* DOM */
const pic = document.getElementById("pic");
const name = document.getElementById("name");
const bio = document.getElementById("bio");
const btn = document.getElementById("actionBtn");

/* USERNAME FROM URL */
const params = new URLSearchParams(location.search);
const username = params.get("u");

if(!username){
  location.href="index.html";
}

/* AUTH */
onAuthStateChanged(auth, async(user)=>{
  const snap = await getDoc(doc(db,"users",username));
  if(!snap.exists()){
    alert("User not found");
    return;
  }

  const d = snap.data();

  name.textContent = d.username;
  bio.textContent = d.bio || "No bio added";
  pic.src = d.photoURL || "default-avatar.png";

  if(user && d.uid === user.uid){
    btn.style.display="inline-block";
    btn.textContent="Edit Profile";
    btn.onclick=()=>location.href=`edit-profile.html?u=${d.username}`;
  }
  else if(user){
    btn.style.display="inline-block";
    btn.textContent="Message";
    btn.onclick=()=>location.href=`message.html?to=${d.username}`;
  }
});
</script>

</body>
</html>
